(function(a){a.promise=function(b){var c=[],f="resolve",e="reject",d=function(i,h,g){try{if(c.length&&typeof(cb=c.shift()[i])=="function"&&(g=cb.apply(h,g))){d(f,h,[g])}}catch(j){[].unshift.call(g,j);d(e,h,g)}};if(typeof b=="function"){b=b()}b=typeof b=="object"?b:{};[f,e,"then"].forEach(function(h,g){Object.defineProperty(b,h,{value:g==2?function(j,i){c.push({resolve:j,reject:i});return this}:function(){d(h,this,arguments)},enumerable:false,writable:false,configurable:false})});return b};a.http=function(b){var d,c=function(h,f,e,g){return d=a.promise(function(){var k=new XMLHttpRequest(),j="?",i="&",m=encodeURIComponent;if(e){for(var l in e){if(e.hasOwnProperty(l)){g+=i+m(l)+"="+m(e[l])}}}if(!(h==="POST"||h==="PUT")){f+=f.indexOf(j)>-1?i:j+(g||"");g=null}k.onload=function(){if(this.status>=200&&this.status<300){d.resolve(this.response)}else{d.reject(this.statusText)}};k.onerror=function(){d.reject(this.statusText)};k.open(h,f);k.send(g);return k})};return{get:function(e){return c("GET",b,e)},post:function(e){return c("POST",b,e)},put:function(e){return c("PUT",b,e)},"delete":function(e){return c("DELETE",b,e)}}}})(window.promise=window.promise||{});