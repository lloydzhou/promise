(function(a){a.promise=function(c){var d=[],g="resolve",f="reject",e=function(j,i,h){try{if(d.length&&typeof(cb=d.shift()[j])=="function"&&(h=cb.apply(i,h))){e(g,i,[h])}}catch(k){e(f,i,[k])}},b=[function(){e(g,c,arguments)},function(){e(f,c,arguments)},function(i,h){d.push({resolve:i,reject:h});return c}];if(typeof c=="function"){c=c.apply(c,b)}return[g,f,"then"].reduce(function(j,k,h){return Object.defineProperty(j,k,{value:b[h],enumerable:false,writable:false,configurable:false})},typeof c=="object"?c:{})};a.http=function(d,i,g){var b,h,f=a.promise,c=String.prototype.toLowerCase,e=function(l,k,j){return h=new f(function(r){var o=new XMLHttpRequest(),n="?",m="&",q=encodeURIComponent;if(typeof j=="object"){for(var p in j){if(j.hasOwnProperty(p)){r+=m+q(p)+"="+q(j[p])}}}else{r=j}if(!(l==="POST"||l==="PUT")){k+=(k.indexOf(n)>-1?m:n)+(r||"");r=null}o.onload=function(){if(o.status>=200&&o.status<300){h.resolve(o.response)}else{h.reject(o.statusText)}};o.onerror=function(){h.reject(o.statusText)};o.open(l,k);o.send(r);return o})};b=new f(["HEAD","GET","POST","PUT","DELETE"].reduce(function(k,j){k[c.call(j)]=function(l){return e(j,d,l)};return k},{}));return i?b[c.call(i)](g):b}})(window.promise=window.promise||{});