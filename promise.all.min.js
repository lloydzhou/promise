(function(a){a.promise=function(d){var e=[],h="resolve",g="reject",b="function",f=function(k,j,i){if(e.length&&typeof(cb=e.shift()[k])==b&&(i=cb.apply(j,i))){f(h,j,[i])}},c=[function(){f(h,d,arguments)},function(){f(g,d,arguments)},function(j,i){e.push({resolve:j,reject:i});return d}];if(typeof d==b){d=d.apply(d,c)}return[h,g,"then"].reduce(function(k,l,j){return Object.defineProperty(k,l,{value:c[j],enumerable:false,writable:false,configurable:false})},d=typeof d=="object"?d:{v:d})};a.http=function(c,g,f){var e=a.promise,d=function(j,i,h){return new e(function(r,o){var m=new XMLHttpRequest(),l="?",k="&",p=encodeURIComponent,q="";if(typeof h=="object"){for(var n in h){if(h.hasOwnProperty(n)){q+=k+p(n)+"="+p(h[n])}}}else{q=h}if(j!="POST"&&j!="PUT"){i+=(i.indexOf(l)>-1?k:l)+q.substr(1);q=null}m.onload=function(){if(m.status>=200&&m.status<300){r(m.response)}else{o(m.statusText)}};m.onerror=function(){o(m.statusText)};m.open(j,i);m.send(q);return m})},b=new e(["HEAD","GET","POST","PUT","DELETE"].reduce(function(i,h){i[h.toLowerCase()]=function(j){return d(h,c,j)};return i},{}));return g?b[g.toLowerCase()](f):b}})(window.promise=window.promise||{});